# METABEGIN
# X-Env-Layer-Name: dart-layer
# X-Env-Layer-Category: dart
# X-Env-Layer-Desc: TODO(Barach)
# X-Env-Layer-Requires: rpi-user-credentials,systemd-net-min
#
# X-Env-VarPrefix: dart
#
# METAEND
---
mmdebstrap:
  packages:
    - cage
    - chromium
  customize-hooks:
    - |
      export DART_USER="$IGconf_device_user1"
      export DART_RUNDIR="/home/$IGconf_device_user1"
      export DART_EXEC="/usr/bin/chromium https://raspberrypi.com https://time.is/London --kiosk --noerrdialogs --disable-infobars --no-first-run --enable-features=OverlayScrollbar --start-maximized"
      envsubst < init_system.service > $1/etc/systemd/system/init_system.service
    - $BDEBSTRAP_HOOKS/enable-units "$1" init_system
